# 時間軸回放功能說明

## 功能概述

新增的時間軸功能讓您可以像"時光機"一樣，回放整個交易過程，隨時查看任意時間點的市場狀況。

## 主要功能

### 1️⃣ 時間軸滑桿

**位置：** 成交明細區塊上方

**功能：**
- 拖動滑桿可以快速跳轉到任意時間點
- 顯示當前時間戳（藍色字體）
- 滑桿範圍：從交易開始到結束

**使用方式：**
1. 用滑鼠拖動藍色圓點
2. 成交明細會自動滾動到對應位置
3. 五檔報價會即時更新為該時間點的狀態
4. 該筆交易會高亮顯示（藍色背景）

### 2️⃣ 自動播放功能

**位置：** 成交明細標題右側的播放按鈕

**功能：**
- ▶️ 播放：自動從當前位置開始回放
- ⏸ 暫停：停止自動播放
- 播放完畢會自動停止

**速度控制：**
- **0.5x** - 慢速（每2秒1筆交易）
- **1x** - 正常速度（每秒1筆交易）
- **2x** - 2倍速
- **5x** - 5倍速
- **10x** - 10倍速（快速瀏覽）

**使用情境：**
- 觀察價格變化趨勢
- 追蹤大單進出時的五檔變化
- 分析交易密集時段

### 3️⃣ 同步更新機制

當您拖動時間軸或自動播放時，以下內容會同步更新：

✅ **成交明細**
- 自動滾動到對應時間
- 高亮當前交易行
- 顯示價格、數量、總量

✅ **五檔報價**
- 更新為該時間點的買賣五檔
- 顯示內外盤量
- 時間戳標記（藍色）

✅ **時間標籤**
- 顯示當前時間（HH:MM:SS.d）
- 即時更新

## 使用示範

### 場景 1：查看特定時間的市場狀況

```
1. 拖動時間軸滑桿到目標時間
2. 查看該時間點的：
   - 成交價格和數量
   - 五檔買賣報價
   - 內外盤力道
```

### 場景 2：觀察價格變化過程

```
1. 點擊 ▶️ 播放按鈕
2. 選擇適當的播放速度（建議 2x 或 5x）
3. 觀察：
   - 價格如何逐步上漲或下跌
   - 五檔掛單如何變化
   - 大單出現時的影響
```

### 場景 3：追蹤大單進出

```
1. 在成交明細中發現大額交易
2. 拖動時間軸到該時間點前後
3. 觀察：
   - 大單出現前的五檔狀況
   - 大單成交瞬間的變化
   - 大單後的市場反應
```

## 操作提示

### 💡 提示 1：快速定位
- 先用滑桿大致定位時間區間
- 再用成交明細滾動微調
- 配合點擊圖表精確定位

### 💡 提示 2：播放控制
- 播放時可以隨時拖動滑桿暫停
- 拖動滑桿會自動停止播放
- 調整速度不會影響當前位置

### 💡 提示 3：多重互動
時間軸、成交明細滾動、圖表點擊三者可以配合使用：
- 用時間軸快速瀏覽
- 用滾動細看詳情
- 用圖表定位價格點

## 技術特性

### 性能優化
- ✅ 平滑滾動動畫
- ✅ 防抖動處理
- ✅ 高效率的時間查找演算法
- ✅ 記憶體優化（只載入必要資料）

### 同步機制
- ✅ 時間軸 ↔ 成交明細
- ✅ 成交明細 ↔ 五檔報價
- ✅ 三者完全同步，無延遲

### 用戶體驗
- ✅ 視覺回饋明確（高亮效果）
- ✅ 時間標記清晰（藍色字體）
- ✅ 操作直觀（拖動即可）

## 鍵盤快捷鍵（未來功能）

計畫中的快捷鍵：
- `Space` - 播放/暫停
- `←` / `→` - 前後移動1筆交易
- `Ctrl + ←` / `→` - 前後移動10筆交易
- `Home` - 跳到開始
- `End` - 跳到結束

## 常見問題

### Q: 為什麼播放速度不是固定的？
A: 播放速度是基於"每秒多少筆交易"，實際時間間隔會根據交易密集度變化。

### Q: 可以倒退播放嗎？
A: 目前版本只支援正向播放。倒退播放功能在未來版本中考慮。

### Q: 時間軸滑桿為什麼會"跳動"？
A: 這是因為滑桿對應到離散的交易筆數，不是連續的時間。拖動時會自動對齊到最近的交易。

### Q: 播放時可以調整速度嗎？
A: 可以！直接在速度下拉選單選擇新速度，會立即生效。

### Q: 五檔更新有延遲嗎？
A: 系統會尋找最接近的五檔資料，通常誤差小於1秒。如果五檔更新頻率較低，可能會有些許延遲。

## 視覺提示說明

| 元素 | 顏色/樣式 | 說明 |
|------|----------|------|
| 時間標籤 | 藍色粗體 | 當前時間點 |
| 滑桿圓點 | 藍色圓形 | 可拖動控制點 |
| 高亮交易行 | 藍色漸變背景 | 當前選中的交易 |
| 五檔時間戳 | 藍色斜體 | 五檔資料的時間 |

## 更新日誌

**v2.5 - 時間軸回放功能**
- ✅ 新增時間軸滑桿
- ✅ 新增自動播放功能
- ✅ 支援多種播放速度
- ✅ 完整的同步更新機制
- ✅ 平滑的視覺效果

---

享受您的"時光機"體驗！🚀
